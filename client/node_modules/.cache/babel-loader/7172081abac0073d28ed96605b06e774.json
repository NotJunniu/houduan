{"remainingRequest":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\src\\store\\modules\\user.js","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\babel.config.js","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1755258879229}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGh0dHAgZnJvbSAiQC91dGlscy9hamF4L2h0dHAiOwppbXBvcnQgYXBpIGZyb20gIkAvYXBpIjsKbGV0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7CmNvbnN0IHN0YXRlID0gewogIHRva2VuOiB0b2tlbiA/IHRva2VuIDogJycsCiAgc2Vzc2lvbjoge30KfTsKY29uc3QgYWN0aW9ucyA9IHsKICBsb2dpbih7CiAgICBjb21taXQKICB9LCBkYXRhKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBodHRwLnBvc3QoYXBpLnVzZXIubG9naW4sIGRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT0gYXBpLmNvZGUuT0spIHsKICAgICAgICAgIGNvbW1pdCgnc2V0U2Vzc2lvbicsIHJlcy5kYXRhLnNlc3Npb24pOwogICAgICAgICAgY29tbWl0KCdzZXRUb2tlbicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICB9CiAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgdG9rZW5Mb2dpbihjb250ZXh0LCBkYXRhKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAvLyDkvb/nlKh0b2tlbiDnmbvlvZUKICAgICAgdmFyIHRva2VuID0gY29udGV4dC5zdGF0ZS50b2tlbjsKICAgICAgaHR0cC5wb3N0KGFwaS51c2VyLnRva2VuTG9naW4sIHsKICAgICAgICB0b2tlbgogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09IGFwaS5jb2RlLk9LKSB7CiAgICAgICAgICAvLyDnmbvlvZXmiJDlip8KICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRTZXNzaW9uJywgcmVzLmRhdGEuc2Vzc2lvbik7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9rZW4nLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKHJlamVjdCk7CiAgICB9KTsKICB9LAogIGxvZ291dCh7CiAgICBjb21taXQKICB9KSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBodHRwLnBvc3QoYXBpLnVzZXIubG9nb3V0KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09IGFwaS5jb2RlLk9LKSB7CiAgICAgICAgICBjb21taXQoJ3NldFNlc3Npb24nLCB7fSk7CiAgICAgICAgICBjb21taXQoJ3NldFRva2VuJywgJycpOwogICAgICAgIH0KICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgcmVqZWN0KGVycik7CiAgICAgIH0pOwogICAgfSk7CiAgfQp9Owpjb25zdCBtdXRhdGlvbnMgPSB7CiAgc2V0U2Vzc2lvbihzdGF0ZSwgZGF0YSkgewogICAgc3RhdGUuc2Vzc2lvbiA9IGRhdGE7CiAgfSwKICBzZXRUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgdG9rZW4pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGUsCiAgYWN0aW9ucywKICBtdXRhdGlvbnMKfTs="},{"version":3,"names":["http","api","token","localStorage","getItem","state","session","actions","login","commit","data","Promise","resolve","reject","post","user","then","res","code","OK","catch","err","tokenLogin","context","logout","mutations","setSession","setToken","window","setItem","namespaced"],"sources":["D:/实训2/springboot和vue旅游系统蓝色3322/client/src/store/modules/user.js"],"sourcesContent":["\r\nimport http from \"@/utils/ajax/http\";\r\nimport api from \"@/api\";\r\nlet token = localStorage.getItem(\"token\");\r\nconst state = {\r\n    token:token ? token : '',\r\n    session:{},\r\n}\r\n\r\n\r\nconst actions = {\r\n    login({commit} , data){\r\n        return new Promise((resolve, reject) => {\r\n            http.post(api.user.login , data).then(res=>{\r\n                if(res.code == api.code.OK){\r\n                    commit('setSession' , res.data.session);\r\n                    commit('setToken' , res.data.token);\r\n                }\r\n                resolve(res);\r\n            }).catch(err=>{\r\n                reject(err);\r\n            });\r\n        })\r\n    },\r\n    tokenLogin( context , data ){\r\n        return new Promise((resolve, reject) => {\r\n            // 使用token 登录\r\n            var token = context.state.token;\r\n            http.post(api.user.tokenLogin,{token}).then(res=>{\r\n                if(res.code == api.code.OK)\r\n                {\r\n                    // 登录成功\r\n                    context.commit('setSession' , res.data.session);\r\n                    context.commit('setToken' , res.data.token);\r\n                    resolve(true);\r\n                }else{\r\n                    resolve(false);\r\n                }\r\n            }).catch(reject);\r\n        });\r\n    },\r\n    logout({commit}){\r\n        return new Promise((resolve, reject) => {\r\n            http.post(api.user.logout).then(res=>{\r\n                if(res.code == api.code.OK){\r\n                    commit('setSession' , {});\r\n                    commit('setToken' , '');\r\n                }\r\n                resolve(res);\r\n            }).catch(err=>{\r\n                reject(err);\r\n            })\r\n        });\r\n    }\r\n}\r\n\r\nconst mutations = {\r\n    setSession(state , data){\r\n\r\n        state.session = data;\r\n    },\r\n    setToken(state , token){\r\n        state.token = token;\r\n        window.localStorage.setItem(\"token\" , token);\r\n    }\r\n}\r\n\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    actions,\r\n    mutations\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}]}