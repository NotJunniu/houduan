{"remainingRequest":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\babel-loader\\lib\\index.js!D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\src\\router\\permission.js","dependencies":[{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\src\\router\\permission.js","mtime":1755326203714},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\babel.config.js","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\babel-loader\\lib\\index.js","mtime":1755258879229}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJvdXRlciBmcm9tICcuL2luZGV4JzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IHsgTWVzc2FnZUJveCB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7IC8vIHByb2dyZXNzIGJhcgppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsgLy8gcHJvZ3Jlc3MgYmFyIHN0eWxlCi8vaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICcuL3V0aWxzL2F1dGgnIC8vIGdldCB0b2tlbiBmcm9tIGNvb2tpZQppbXBvcnQgamRrIGZyb20gJ0AvdXRpbHMvZXh0ZW5kJzsKY29uc3Qgc2V0dGluZyA9IHJlcXVpcmUoJ0Avc2V0dGluZycpOwpOUHJvZ3Jlc3MuY29uZmlndXJlKHsKICBzaG93U3Bpbm5lcjogZmFsc2UKfSk7IC8vIE5Qcm9ncmVzcyBDb25maWd1cmF0aW9uCi8vIG5vIHJlZGlyZWN0IHdoaXRlbGlzdAp2YXIgaW5kZXggPSAwOwp2YXIgdGl0bGUgPSBzZXR0aW5nLnRpdGxlOwpmdW5jdGlvbiBnZXRQYWdlVGl0bGUocGFnZVRpdGxlKSB7CiAgaWYgKHBhZ2VUaXRsZSkgewogICAgcmV0dXJuIGAke3BhZ2VUaXRsZX0gLSAke3RpdGxlfWA7CiAgfQogIHJldHVybiBgJHt0aXRsZX1gOwp9CnJvdXRlci5iZWZvcmVFYWNoKGFzeW5jICh0bywgZnJvbSwgbmV4dCkgPT4gewogIC8vIHN0YXJ0IHByb2dyZXNzIGJhcgogIE5Qcm9ncmVzcy5zdGFydCgpOwogIC8vY29uc29sZS5sb2coamRrLmV4dGVuZCggdHJ1ZSx7fSx0byApKTsKICAvL2NvbnNvbGUubG9nKGxvY2F0aW9uLmhyZWYpOwogIC8vIHNldCBwYWdlIHRpdGxlCiAgdmFyIHRpdGxlID0gdG8ubWV0YS50aXRsZTsKICBkb2N1bWVudC50aXRsZSA9IGdldFBhZ2VUaXRsZShqZGsuaXNGdW5jdGlvbih0aXRsZSkgPyB0aXRsZShzdG9yZS5zdGF0ZSkgOiB0aXRsZSk7CiAgY29uc3QgaGFzVG9rZW4gPSBzdG9yZS5zdGF0ZS51c2VyLnRva2VuOwogIGNvbnN0IHVzZXIgPSBzdG9yZS5zdGF0ZS51c2VyOwogIGlmIChoYXNUb2tlbiAmJiAhdXNlci5zZXNzaW9uLnVzZXJuYW1lKSB7CiAgICAvLyB0b2tlbiBzZXNzaW9uIOS/oeaBr+S4jeWtmOWcqO+8jOWImeabtOaWsAogICAgYXdhaXQgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvdG9rZW5Mb2dpbicpLmNhdGNoKGVyciA9PiB7CiAgICAgIE1lc3NhZ2VCb3guYWxlcnQoZXJyLm1lc3NhZ2UpOwogICAgfSk7CiAgfQoKICAvLyDliKTmlq3mmK/lkKbpnIDopoHnmbvlvZXmiY3lj6/orr/pl67or6Xpk77mjqUKICBpZiAodG8ubWV0YS5hdXRoTG9naW4pIHsKICAgIC8vIOmcgOimgemqjOivgeeZu+W9le+8jOWImeWIpOaWreaYr+WQpuacieeZu+W9lQoKICAgIGlmICghaGFzVG9rZW4gfHwgIXVzZXIuc2Vzc2lvbi51c2VybmFtZSkgewogICAgICBpZiAodG8ubWV0YS5tc2cpIHsKICAgICAgICBhd2FpdCBNZXNzYWdlQm94LmFsZXJ0KCflsJrmnKrnmbvlvZXvvIzor7fnmbvlvZXlkI7mk43kvZwnKTsKICAgICAgfQogICAgICBuZXh0KGAvbG9naW4/cmVkaXJlY3Q9JHt0by5mdWxsUGF0aH1gKTsKICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoKTsKICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgIH0KICB9IGVsc2UgewogICAgbmV4dCgpOwogICAgTlByb2dyZXNzLmRvbmUoKTsKICB9Cn0pOwpyb3V0ZXIuYWZ0ZXJFYWNoKCgpID0+IHsKICAvLyBmaW5pc2ggcHJvZ3Jlc3MgYmFyCiAgTlByb2dyZXNzLmRvbmUoKTsKfSk7"},{"version":3,"names":["router","store","MessageBox","NProgress","jdk","setting","require","configure","showSpinner","index","title","getPageTitle","pageTitle","beforeEach","to","from","next","start","meta","document","isFunction","state","hasToken","user","token","session","username","dispatch","catch","err","alert","message","authLogin","msg","fullPath","done","afterEach"],"sources":["D:/实训2/springboot和vue旅游系统蓝色3322/bysj-client/src/router/permission.js"],"sourcesContent":["import router from './index'\nimport store from '../store'\n\nimport {MessageBox} from 'element-ui'\nimport NProgress from 'nprogress' // progress bar\nimport 'nprogress/nprogress.css' // progress bar style\n//import { getToken } from './utils/auth' // get token from cookie\nimport jdk from '@/utils/extend'\nconst setting =require( '@/setting');\nNProgress.configure({showSpinner: false}) // NProgress Configuration\n// no redirect whitelist\nvar index = 0;\n\nvar title = setting.title;\nfunction getPageTitle(pageTitle) {\n    if (pageTitle) {\n        return `${pageTitle} - ${title}`\n    }\n    return `${title}`\n}\n\nrouter.beforeEach(async (to, from, next) => {\n    // start progress bar\n    NProgress.start()\n    //console.log(jdk.extend( true,{},to ));\n    //console.log(location.href);\n    // set page title\n    var title = to.meta.title;\n\n    document.title = getPageTitle( jdk.isFunction(title) ? title(store.state) : title )\n\n    const hasToken = store.state.user.token\n    const user = store.state.user\n\n    if(hasToken && !user.session.username)\n    {\n        // token session 信息不存在，则更新\n        await store.dispatch('user/tokenLogin').catch(err=>{\n            MessageBox.alert(err.message);\n        });\n    }\n\n\n    // 判断是否需要登录才可访问该链接\n    if(to.meta.authLogin)\n    {\n        // 需要验证登录，则判断是否有登录\n\n\n        if(!hasToken || !user.session.username){\n            if(to.meta.msg){\n                await MessageBox.alert('尚未登录，请登录后操作');\n            }\n\n            next(`/login?redirect=${to.fullPath}`)\n            NProgress.done();\n        }else{\n            next();\n            NProgress.done();\n        }\n    }else{\n        next();\n        NProgress.done();\n    }\n\n})\n\nrouter.afterEach(() => {\n    // finish progress bar\n    NProgress.done()\n})\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,SAAS;AAC5B,OAAOC,KAAK,MAAM,UAAU;AAE5B,SAAQC,UAAU,QAAO,YAAY;AACrC,OAAOC,SAAS,MAAM,WAAW,EAAC;AAClC,OAAO,yBAAyB,EAAC;AACjC;AACA,OAAOC,GAAG,MAAM,gBAAgB;AAChC,MAAMC,OAAO,GAAEC,OAAO,CAAE,WAAW,CAAC;AACpCH,SAAS,CAACI,SAAS,CAAC;EAACC,WAAW,EAAE;AAAK,CAAC,CAAC,EAAC;AAC1C;AACA,IAAIC,KAAK,GAAG,CAAC;AAEb,IAAIC,KAAK,GAAGL,OAAO,CAACK,KAAK;AACzB,SAASC,YAAYA,CAACC,SAAS,EAAE;EAC7B,IAAIA,SAAS,EAAE;IACX,OAAO,GAAGA,SAAS,MAAMF,KAAK,EAAE;EACpC;EACA,OAAO,GAAGA,KAAK,EAAE;AACrB;AAEAV,MAAM,CAACa,UAAU,CAAC,OAAOC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACxC;EACAb,SAAS,CAACc,KAAK,CAAC,CAAC;EACjB;EACA;EACA;EACA,IAAIP,KAAK,GAAGI,EAAE,CAACI,IAAI,CAACR,KAAK;EAEzBS,QAAQ,CAACT,KAAK,GAAGC,YAAY,CAAEP,GAAG,CAACgB,UAAU,CAACV,KAAK,CAAC,GAAGA,KAAK,CAACT,KAAK,CAACoB,KAAK,CAAC,GAAGX,KAAM,CAAC;EAEnF,MAAMY,QAAQ,GAAGrB,KAAK,CAACoB,KAAK,CAACE,IAAI,CAACC,KAAK;EACvC,MAAMD,IAAI,GAAGtB,KAAK,CAACoB,KAAK,CAACE,IAAI;EAE7B,IAAGD,QAAQ,IAAI,CAACC,IAAI,CAACE,OAAO,CAACC,QAAQ,EACrC;IACI;IACA,MAAMzB,KAAK,CAAC0B,QAAQ,CAAC,iBAAiB,CAAC,CAACC,KAAK,CAACC,GAAG,IAAE;MAC/C3B,UAAU,CAAC4B,KAAK,CAACD,GAAG,CAACE,OAAO,CAAC;IACjC,CAAC,CAAC;EACN;;EAGA;EACA,IAAGjB,EAAE,CAACI,IAAI,CAACc,SAAS,EACpB;IACI;;IAGA,IAAG,CAACV,QAAQ,IAAI,CAACC,IAAI,CAACE,OAAO,CAACC,QAAQ,EAAC;MACnC,IAAGZ,EAAE,CAACI,IAAI,CAACe,GAAG,EAAC;QACX,MAAM/B,UAAU,CAAC4B,KAAK,CAAC,aAAa,CAAC;MACzC;MAEAd,IAAI,CAAC,mBAAmBF,EAAE,CAACoB,QAAQ,EAAE,CAAC;MACtC/B,SAAS,CAACgC,IAAI,CAAC,CAAC;IACpB,CAAC,MAAI;MACDnB,IAAI,CAAC,CAAC;MACNb,SAAS,CAACgC,IAAI,CAAC,CAAC;IACpB;EACJ,CAAC,MAAI;IACDnB,IAAI,CAAC,CAAC;IACNb,SAAS,CAACgC,IAAI,CAAC,CAAC;EACpB;AAEJ,CAAC,CAAC;AAEFnC,MAAM,CAACoC,SAAS,CAAC,MAAM;EACnB;EACAjC,SAAS,CAACgC,IAAI,CAAC,CAAC;AACpB,CAAC,CAAC","ignoreList":[]}]}