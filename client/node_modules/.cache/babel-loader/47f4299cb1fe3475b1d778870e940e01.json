{"remainingRequest":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\src\\views\\login\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\src\\views\\login\\index.vue","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\babel.config.js","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1755258879229},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1755258879809}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHNldHRpbmcgZnJvbSAiQC9zZXR0aW5nIjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZ3JhbW9zLWxvZ2luIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2FkZWQ6IHRydWUsCiAgICAgIHNldHRpbmcsCiAgICAgIGNhcHRjaFVybDogJycsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgIHB3ZDogJycsCiAgICAgICAgY3g6ICfnrqHnkIblkZgnLAogICAgICAgIC8qIOmqjOivgeeggeautSAqLwogICAgICAgIHBhZ2VyYW5kb206ICcnLAogICAgICAgIGE6ICdhJwogICAgICAgIC8qIOmqjOivgeeggeautSAqLwogICAgICB9LAogICAgICBydWxlczogWyfnrqHnkIblkZgnLCAn55So5oi3J10KICAgIH07CiAgfSwKICB3YXRjaDoge30sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dpbicsIHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGlmIChyZXMuY29kZSA9PSBhcGkuY29kZS5PSykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnmbvlvZXmiJDlip8nKTsKICAgICAgICAgIHZhciByZWRpcmVjdCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0OwogICAgICAgICAgaWYgKHJlZGlyZWN0KSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHJlZGlyZWN0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvYWRtaW4vc3knKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlcy5jb2RlID09IDIwKSB7CiAgICAgICAgICB0aGlzLmxvYWRDYXB0Y2goKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRDYXB0Y2goKSB7CiAgICAgIGFwaS5jYXB0Y2goKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB0aGlzLmZvcm0uY2FwdGNoVG9rZW4gPSByZXMudG9rZW47CiAgICAgICAgdGhpcy5jYXB0Y2hVcmwgPSByZXMudXJsOwogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZvcm0uY3ggPSB0aGlzLnJ1bGVzWzBdOwogICAgdGhpcy5sb2FkQ2FwdGNoKCk7CiAgfSwKICBtb3VudGVkKCkgewogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTsKICAgIH0sIDUwMCk7CiAgfSwKICBkZXN0cm95ZWQoKSB7fQp9Ow=="},{"version":3,"names":["setting","api","name","data","isLoaded","captchUrl","loading","form","username","pwd","cx","pagerandom","a","rules","watch","computed","methods","login","$store","dispatch","then","res","code","OK","$message","success","redirect","$route","query","$router","replace","error","msg","loadCaptch","catch","err","message","captch","console","log","captchToken","token","url","created","mounted","setTimeout","destroyed"],"sources":["src/views/login/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"gramos-login\">\r\n        <div class=\"page-loader\" v-show=\"isLoaded\">\r\n            <div class=\"spinner-border\"></div>\r\n            <span>Loading ...</span>\r\n        </div>\r\n\r\n        <e-container class=\"h-100vh\">\r\n            <el-row type=\"flex\" align=\"center\" justify=\"center\" class=\"h-100vh\" style=\"align-items: center\">\r\n                <el-col :md=\"12\">\r\n                    <img class=\"img-fluid\" src=\"~@/assets/gramos/login.png\" alt=\"...\">\r\n                </el-col>\r\n                <el-col :md=\"8\" :offset=\"1\">\r\n                    <div class=\"d-flex align-items-center\" style=\"margin-bottom: 20px\">\r\n                        <img src=\"~@/assets/gramos/dark-logo.png\" class=\"m-r-15\" style=\"margin-right: 15px\" width=\"40\" alt=\"\">\r\n                        <h3 class=\"m-0\" style=\"margin: 0;\">{{ setting.title }}</h3>\r\n                    </div>\r\n                    <p>输入账号密码，登录系统.</p>\r\n                    <form action=\"javascript:;\" id=\"loginForm\" name=\"loginForm\" method=\"post\" @submit=\"login\">\r\n                        <div class=\"form-group mb-4\">\r\n                            <el-input type=\"text\" v-model=\"form.username\"\r\n                                      id=\"username\" autofocus placeholder=\"账号\"></el-input>\r\n                        </div>\r\n                        <div class=\"form-group mb-4\">\r\n                            <el-input type=\"password\" v-model=\"form.pwd\" id=\"password\" placeholder=\"密码\"></el-input>\r\n                        </div>\r\n                        <div class=\"form-group mb-4\">\r\n\r\n                            <el-input type=\"text\" v-model=\"form.pagerandom\" name=\"pagerandom\" class=\"form-control form-control-lg\" id=\"pagerandom\" placeholder=\"验证码\">\r\n                                <span class=\"input-group-append\" slot=\"append\">\r\n                                    <e-img :src=\"captchUrl\" style=\"min-width: 60px;min-height: 30px;\" onClick=\"this.src='captcha.do?time='+new Date().getTime();\" alt=\"点击刷新\"/>\r\n                                </span>\r\n                            </el-input>\r\n                        </div>\r\n                        <div class=\"form-group mb-4\">\r\n                            <el-select id=\"sys\" name=\"cx\" v-model=\"form.cx\" class=\"form-control-lg\">\r\n                                <el-option :value=\"r\" :label=\"r\" v-for=\"r in rules\" :key=\"r\"></el-option>\r\n                            </el-select>\r\n                        </div>\r\n\r\n                        <el-button type=\"primary\" native-type=\"submit\" class=\"btn btn-primary btn-lg btn-block btn-uppercase mb-4\">登录系统</el-button>\r\n\r\n                        <div class=\"text-center\">\r\n                            版权所有：{{ setting.title }}\r\n                        </div>\r\n                    </form>\r\n                </el-col>\r\n            </el-row>\r\n        </e-container>\r\n\r\n    </div>\r\n</template>\r\n<style type=\"type/scss\" lang=\"scss\">\r\n.gramos-login{\r\n    height: 100%;\r\n    width: 100%;\r\n    background: #ffffff;\r\n    font-family: \"微软雅黑\", \"Microsoft YaHei\", sans-serif, Arial, 'Times New Roman', -apple-system, BlinkMacSystemFont, sans-serif;\r\n    .h-100vh{\r\n        height: 100vh;\r\n    }\r\n    .d-flex {\r\n        display: -ms-flexbox !important;\r\n        display: flex !important\r\n    }\r\n    .form-control-lg{\r\n        width: 100%;\r\n    }\r\n    .btn-block{\r\n        display: block;\r\n        width: 100%;\r\n    }\r\n    h3{\r\n        font-size: 26px;\r\n    }\r\n    .align-items-center {\r\n        -ms-flex-align: center !important;\r\n        align-items: center !important\r\n    }\r\n    .page-loader {\r\n        position: fixed;\r\n        right: 0;\r\n        left: 0;\r\n        top: 0;\r\n        bottom: 0;\r\n        z-index: 1001;\r\n        background: white;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n    }\r\n    .align-items-md-center {\r\n        -ms-flex-align: center !important;\r\n        align-items: center !important\r\n    }\r\n    .page-loader .spinner-border {\r\n        margin-bottom: 15px;\r\n    }\r\n    .mb-4, .my-4 {\r\n        margin-bottom: 1.5rem !important\r\n    }\r\n\r\n    .page-loader span {\r\n        text-transform: uppercase;\r\n        letter-spacing: 1px;\r\n        color: #646464;\r\n        font-size: 12px;\r\n    }\r\n\r\n}\r\n</style>\r\n<script>\r\nimport setting from \"@/setting\";\r\nimport api from \"@/api\";\r\n\r\nexport default {\r\n    name: \"gramos-login\",\r\n    data() {\r\n        return {\r\n            isLoaded:true,\r\n            setting,\r\n            captchUrl: '',\r\n            loading: false,\r\n            form: {\r\n                username: '',\r\n                pwd: '',\r\n                cx: '管理员',\r\n\r\n                /* 验证码段 */\r\n                pagerandom:'',\r\n                a:'a'\r\n                /* 验证码段 */\r\n\r\n            },\r\n            rules: [\r\n                                    '管理员',\r\n                                    '用户',\r\n                            ]\r\n        }\r\n    },\r\n    watch: {},\r\n    computed: {},\r\n    methods: {\r\n        login() {\r\n\r\n            this.loading = true;\r\n            this.$store.dispatch('user/login', this.form).then(res => {\r\n\r\n                this.loading = false;\r\n                if (res.code == api.code.OK) {\r\n                    this.$message.success('登录成功');\r\n                    var redirect = this.$route.query.redirect;\r\n                    if (redirect) {\r\n                        this.$router.replace(redirect);\r\n                    } else {\r\n                        this.$router.replace('/admin/sy');\r\n                    }\r\n                } else {\r\n                    this.$message.error(res.msg);\r\n                }\r\n                if(res.code == 20){\r\n                    this.loadCaptch();\r\n                }\r\n            }).catch(err => {\r\n                this.loading = false;\r\n                this.$message.error(err.message)\r\n            });\r\n        },\r\n        loadCaptch()\r\n        {\r\n            api.captch().then(res=>{\r\n                console.log(res);\r\n                this.form.captchToken = res.token;\r\n                this.captchUrl = res.url;\r\n            });\r\n        }\r\n    },\r\n    created() {\r\n        this.form.cx = this.rules[0];\r\n        this.loadCaptch();\r\n\r\n    },\r\n    mounted() {\r\n        setTimeout(()=>{\r\n            this.isLoaded = false;\r\n        },500);\r\n    },\r\n    destroyed() {\r\n    }\r\n}\r\n</script>"],"mappings":"AAiHA,OAAAA,OAAA;AACA,OAAAC,GAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAJ,OAAA;MACAK,SAAA;MACAC,OAAA;MACAC,IAAA;QACAC,QAAA;QACAC,GAAA;QACAC,EAAA;QAEA;QACAC,UAAA;QACAC,CAAA;QACA;MAEA;MACAC,KAAA,GACA,OACA;IAEA;EACA;EACAC,KAAA;EACAC,QAAA;EACAC,OAAA;IACAC,MAAA;MAEA,KAAAX,OAAA;MACA,KAAAY,MAAA,CAAAC,QAAA,oBAAAZ,IAAA,EAAAa,IAAA,CAAAC,GAAA;QAEA,KAAAf,OAAA;QACA,IAAAe,GAAA,CAAAC,IAAA,IAAArB,GAAA,CAAAqB,IAAA,CAAAC,EAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,IAAAC,QAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAF,QAAA;UACA,IAAAA,QAAA;YACA,KAAAG,OAAA,CAAAC,OAAA,CAAAJ,QAAA;UACA;YACA,KAAAG,OAAA,CAAAC,OAAA;UACA;QACA;UACA,KAAAN,QAAA,CAAAO,KAAA,CAAAV,GAAA,CAAAW,GAAA;QACA;QACA,IAAAX,GAAA,CAAAC,IAAA;UACA,KAAAW,UAAA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACA,KAAA7B,OAAA;QACA,KAAAkB,QAAA,CAAAO,KAAA,CAAAI,GAAA,CAAAC,OAAA;MACA;IACA;IACAH,WAAA,EACA;MACAhC,GAAA,CAAAoC,MAAA,GAAAjB,IAAA,CAAAC,GAAA;QACAiB,OAAA,CAAAC,GAAA,CAAAlB,GAAA;QACA,KAAAd,IAAA,CAAAiC,WAAA,GAAAnB,GAAA,CAAAoB,KAAA;QACA,KAAApC,SAAA,GAAAgB,GAAA,CAAAqB,GAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAApC,IAAA,CAAAG,EAAA,QAAAG,KAAA;IACA,KAAAoB,UAAA;EAEA;EACAW,QAAA;IACAC,UAAA;MACA,KAAAzC,QAAA;IACA;EACA;EACA0C,UAAA,GACA;AACA","ignoreList":[]}]}