{"remainingRequest":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\src\\components\\image\\upload-images.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\src\\components\\image\\upload-images.vue","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\babel.config.js","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1755258879229},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1755258879809}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gIkAvdXRpbHMvZXh0ZW5kIjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaSI7CmltcG9ydCBFSW1nIGZyb20gIkAvY29tcG9uZW50cy9pbWFnZS9pbWciOwppbXBvcnQgeyBmb3JtYXRJbWFnZVNyYyB9IGZyb20gIkAvdXRpbHMvdXRpbHMiOwppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZSc7CmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZS11cGxvYWQtaW1hZ2VzIiwKICBjb21wb25lbnRzOiB7CiAgICBFSW1nLAogICAgZHJhZ2dhYmxlCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHJhZ09wdGlvbnM6IHt9LAogICAgICBpc0RyYWdnaW5nOiBmYWxzZSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IFtTdHJpbmcsIEFycmF5XQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbGVMaXN0OiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5pbWFnZXNVcmwoKTsKICAgICAgfSwKICAgICAgc2V0KHZhbCkgewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsLmpvaW4oJywnKSk7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7fSwKICBtZXRob2RzOiB7CiAgICBQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGU7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgZG93bmxvYWQoZmlsZSkgewogICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgYS5ocmVmID0gZm9ybWF0SW1hZ2VTcmMoZmlsZSk7CiAgICAgIGEuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIHBhdGguYmFzZW5hbWUoZmlsZSkpOwogICAgICBhLnRhcmdldCA9ICdfYmxhbmsnOwogICAgICBhLmNsaWNrKCk7CiAgICB9LAogICAgZGVsZXRlSW1hZ2UoZmlsZSkgewogICAgICB2YXIgaW1hZ2VzID0gdGhpcy5pbWFnZXNVcmwoKS5maWx0ZXIoZiA9PiBmICE9IGZpbGUpOwogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGltYWdlcy5qb2luKCcsJykpOwogICAgfSwKICAgIGltYWdlc1VybCgpIHsKICAgICAgdmFyIGltYWdlcyA9IHRoaXMudmFsdWU7CiAgICAgIGlmICghaXNBcnJheShpbWFnZXMpKSB7CiAgICAgICAgaW1hZ2VzID0gaW1hZ2VzLnNwbGl0KCIsIik7CiAgICAgIH0KICAgICAgcmV0dXJuIGltYWdlcy5maWx0ZXIocyA9PiBzICE9ICcnKTsKICAgIH0sCiAgICBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBhcGkuYXR0YWNobWVudC51cGxvYWQoZmlsZSkudGhlbihmID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB2YXIgaW1hZ2VzID0gdGhpcy5pbWFnZXNVcmwoKTsKICAgICAgICBpbWFnZXMucHVzaChmKTsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGltYWdlcy5qb2luKCcsJykpOwogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7fSwKICBtb3VudGVkKCkge30sCiAgZGVzdHJveWVkKCkge30KfTs="},{"version":3,"names":["isArray","api","EImg","formatImageSrc","draggable","path","require","name","components","data","dragOptions","isDragging","dialogVisible","dialogImageUrl","loading","props","value","String","Array","computed","fileList","get","imagesUrl","set","val","$emit","join","watch","methods","Preview","file","download","a","document","createElement","href","setAttribute","basename","target","click","deleteImage","images","filter","f","split","s","beforeUpload","attachment","upload","then","push","catch","err","$message","error","created","mounted","destroyed"],"sources":["src/components/image/upload-images.vue"],"sourcesContent":["<template>\r\n    <div class=\"e-upload-images\" v-loading=\"loading\">\r\n        <el-upload list-type=\"picture-card\" :show-file-list=\"false\" action=\"#\" multiple :before-upload=\"beforeUpload\">\r\n            <i slot=\"trigger\" class=\"el-icon-plus\"></i>\r\n            <draggable class=\"el-upload-list el-upload-list--picture-card\" element=\"ul\" v-model=\"fileList\" :options=\"dragOptions\" @start=\"isDragging=true\" @end=\"isDragging=false\">\r\n                <li tabindex=\"0\" class=\"el-upload-list__item is-ready\" v-for=\"img in imagesUrl()\" :key=\"img\">\r\n                    <div>\r\n                        <e-img :src=\"img\" alt=\"\" class=\"el-upload-list__item-thumbnail\" />\r\n                        <div class=\"el-upload-list__item-actions\">\r\n                            <span class=\"el-upload-list__item-preview\" @click=\"Preview(img)\"><i class=\"el-icon-zoom-in\"></i></span>\r\n                            <span class=\"el-upload-list__item-delete\" @click=\"download(img)\"><i class=\"el-icon-download\"></i></span>\r\n                            <el-popconfirm title=\"确定删除该图片？\" @confirm=\"deleteImage(img)\" @onConfirm=\"deleteImage(img)\">\r\n                            <span class=\"el-upload-list__item-delete\" slot=\"reference\"><i class=\"el-icon-delete\"></i></span>\r\n                            </el-popconfirm>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n            </draggable>\r\n        </el-upload>\r\n        <el-dialog :visible.sync=\"dialogVisible\">\r\n            <e-img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\"/>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<style type=\"text/scss\" scoped lang=\"scss\">\r\n    .e-upload-images {\r\n        .el-upload-list{\r\n            margin-left: 10px;\r\n        }\r\n        .el-upload {\r\n            margin-right: 20px;\r\n            margin-bottom: 20px;\r\n            text-align: center;\r\n\r\n            img {\r\n                max-width: 100%;\r\n                max-height: 100%;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n<script>\r\n    import {isArray} from \"@/utils/extend\";\r\n    import api from \"@/api\";\r\n    import EImg from \"@/components/image/img\";\r\n    import {formatImageSrc} from \"@/utils/utils\";\r\n    import draggable from 'vuedraggable'\r\n    const path = require('path')\r\n\r\n    export default {\r\n        name: \"e-upload-images\",\r\n        components: {EImg,draggable},\r\n        data() {\r\n            return {\r\n                dragOptions:{\r\n\r\n                },\r\n                isDragging:false,\r\n                dialogVisible:false,\r\n                dialogImageUrl:'',\r\n                loading: false\r\n            }\r\n        },\r\n        props: {\r\n            value: [String, Array]\r\n        },\r\n        computed:{\r\n            fileList:{\r\n                get(){\r\n                    return this.imagesUrl();\r\n                },\r\n                set(val){\r\n                    this.$emit('input' , val.join(','))\r\n                }\r\n            }\r\n        },\r\n        watch: {},\r\n        methods: {\r\n            Preview(file){\r\n                this.dialogImageUrl = file;\r\n                this.dialogVisible = true;\r\n            },\r\n            download(file){\r\n                var a = document.createElement('a');\r\n                a.href = formatImageSrc(file);\r\n                a.setAttribute(\"download\" , path.basename(file));\r\n                a.target = '_blank'\r\n                a.click();\r\n            },\r\n            deleteImage( file ){\r\n                var images = this.imagesUrl().filter( f=>f!=file )\r\n                this.$emit('input' , images.join(','))\r\n            },\r\n            imagesUrl() {\r\n                var images = this.value;\r\n                if (!isArray(images)) {\r\n                    images = images.split(\",\");\r\n                }\r\n                return images.filter(s => s != '');\r\n            },\r\n            beforeUpload(file) {\r\n\r\n                this.loading = true;\r\n                api.attachment.upload(file).then(f => {\r\n                    this.loading = false;\r\n                    var images = this.imagesUrl();\r\n                    images.push(f);\r\n                    this.$emit('input', images.join(','));\r\n                }).catch(err => {\r\n                    this.loading = false;\r\n                    this.$message.error(err);\r\n                })\r\n                return false;\r\n            }\r\n        },\r\n        created() {\r\n\r\n        },\r\n        mounted() {\r\n        },\r\n        destroyed() {\r\n        }\r\n    }\r\n</script>\r\n"],"mappings":";;;AA0CA,SAAAA,OAAA;AACA,OAAAC,GAAA;AACA,OAAAC,IAAA;AACA,SAAAC,cAAA;AACA,OAAAC,SAAA;AACA,MAAAC,IAAA,GAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAN,IAAA;IAAAE;EAAA;EACAK,KAAA;IACA;MACAC,WAAA,GAEA;MACAC,UAAA;MACAC,aAAA;MACAC,cAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACAC,KAAA,GAAAC,MAAA,EAAAC,KAAA;EACA;EACAC,QAAA;IACAC,QAAA;MACAC,IAAA;QACA,YAAAC,SAAA;MACA;MACAC,IAAAC,GAAA;QACA,KAAAC,KAAA,UAAAD,GAAA,CAAAE,IAAA;MACA;IACA;EACA;EACAC,KAAA;EACAC,OAAA;IACAC,QAAAC,IAAA;MACA,KAAAjB,cAAA,GAAAiB,IAAA;MACA,KAAAlB,aAAA;IACA;IACAmB,SAAAD,IAAA;MACA,IAAAE,CAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,CAAA,CAAAG,IAAA,GAAAhC,cAAA,CAAA2B,IAAA;MACAE,CAAA,CAAAI,YAAA,aAAA/B,IAAA,CAAAgC,QAAA,CAAAP,IAAA;MACAE,CAAA,CAAAM,MAAA;MACAN,CAAA,CAAAO,KAAA;IACA;IACAC,YAAAV,IAAA;MACA,IAAAW,MAAA,QAAAnB,SAAA,GAAAoB,MAAA,CAAAC,CAAA,IAAAA,CAAA,IAAAb,IAAA;MACA,KAAAL,KAAA,UAAAgB,MAAA,CAAAf,IAAA;IACA;IACAJ,UAAA;MACA,IAAAmB,MAAA,QAAAzB,KAAA;MACA,KAAAhB,OAAA,CAAAyC,MAAA;QACAA,MAAA,GAAAA,MAAA,CAAAG,KAAA;MACA;MACA,OAAAH,MAAA,CAAAC,MAAA,CAAAG,CAAA,IAAAA,CAAA;IACA;IACAC,aAAAhB,IAAA;MAEA,KAAAhB,OAAA;MACAb,GAAA,CAAA8C,UAAA,CAAAC,MAAA,CAAAlB,IAAA,EAAAmB,IAAA,CAAAN,CAAA;QACA,KAAA7B,OAAA;QACA,IAAA2B,MAAA,QAAAnB,SAAA;QACAmB,MAAA,CAAAS,IAAA,CAAAP,CAAA;QACA,KAAAlB,KAAA,UAAAgB,MAAA,CAAAf,IAAA;MACA,GAAAyB,KAAA,CAAAC,GAAA;QACA,KAAAtC,OAAA;QACA,KAAAuC,QAAA,CAAAC,KAAA,CAAAF,GAAA;MACA;MACA;IACA;EACA;EACAG,QAAA,GAEA;EACAC,QAAA,GACA;EACAC,UAAA,GACA;AACA","ignoreList":[]}]}