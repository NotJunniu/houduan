{"remainingRequest":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\src\\components\\Tinymce\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\src\\components\\Tinymce\\index.vue","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\babel-loader\\lib\\index.js","mtime":1755258879229},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\vue-loader\\lib\\index.js","mtime":1755258879809}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICAvKioKICAgICAqIGRvY3M6CiAgICAgKiBodHRwczovL3BhbmppYWNoZW4uZ2l0aHViLmlvL3Z1ZS1lbGVtZW50LWFkbWluLXNpdGUvZmVhdHVyZS9jb21wb25lbnQvcmljaC1lZGl0b3IuaHRtbCN0aW55bWNlCiAgICAgKi8KICAgIGltcG9ydCBlZGl0b3JJbWFnZSBmcm9tICcuL2NvbXBvbmVudHMvRWRpdG9ySW1hZ2UnCiAgICBpbXBvcnQgcGx1Z2lucyBmcm9tICcuL3BsdWdpbnMnCiAgICBpbXBvcnQgdG9vbGJhciBmcm9tICcuL3Rvb2xiYXInCiAgICBpbXBvcnQgbG9hZCBmcm9tICcuL2R5bmFtaWNMb2FkU2NyaXB0JwoKICAgIC8vIHdoeSB1c2UgdGhpcyBjZG4sIGRldGFpbCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdGlueW1jZS1hbGwtaW4tb25lCiAgICBjb25zdCB0aW55bWNlQ0ROID0gJy9zdGF0aWMvdGlueW1jZS90aW55bWNlLm1pbi5qcycKCiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbmFtZTogJ2p0LXRpbnltY2UnLAogICAgICAgIGNvbXBvbmVudHM6IHtlZGl0b3JJbWFnZX0sCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgaWQ6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3Z1ZS10aW55bWNlLScgKyArbmV3IERhdGUoKSArICgoTWF0aC5yYW5kb20oKSAqIDEwMDApLnRvRml4ZWQoMCkgKyAnJykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvb2xiYXI6IHsKICAgICAgICAgICAgICAgIHR5cGU6IEFycmF5LAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgZGVmYXVsdCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gW10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWVudWJhcjogewogICAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICAgICAgZGVmYXVsdDogJ2ZpbGUgZWRpdCBpbnNlcnQgdmlldyBmb3JtYXQgdGFibGUnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhlaWdodDogewogICAgICAgICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDM2MAogICAgICAgICAgICB9LAogICAgICAgICAgICB3aWR0aDogewogICAgICAgICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICdhdXRvJwogICAgICAgICAgICB9LAogICAgICAgICAgICB1cGxvYWRJbWFnZTp7CiAgICAgICAgICAgICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBpY2tlclVwbG9hZEltYWdlOnsKICAgICAgICAgICAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICAgICAgICAgICAgZGVmYXVsdDpmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaWxlLHN1Y2Nlc3MsZmFpbHVyZSkgewoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBoYXNDaGFuZ2U6IGZhbHNlLAogICAgICAgICAgICAgICAgaGFzSW5pdDogZmFsc2UsCiAgICAgICAgICAgICAgICB0aW55bWNlSWQ6IHRoaXMuaWQsCiAgICAgICAgICAgICAgICBmdWxsc2NyZWVuOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxhbmd1YWdlVHlwZUxpc3Q6IHsKICAgICAgICAgICAgICAgICAgICAnZW4nOiAnZW4nLAogICAgICAgICAgICAgICAgICAgICd6aCc6ICd6aF9DTicsCiAgICAgICAgICAgICAgICAgICAgJ2VzJzogJ2VzX01YJywKICAgICAgICAgICAgICAgICAgICAnamEnOiAnamEnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNvbXB1dGVkOiB7CiAgICAgICAgICAgIGNvbnRhaW5lcldpZHRoKCkgewogICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLndpZHRoCiAgICAgICAgICAgICAgICBpZiAoL15bXGRdKyhcLltcZF0rKT8kLy50ZXN0KHdpZHRoKSkgeyAvLyBtYXRjaGVzIGAxMDBgLCBgJzEwMCdgCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke3dpZHRofXB4YAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHdpZHRoCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHdhdGNoOiB7CiAgICAgICAgICAgIHZhbHVlKHZhbCkgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc0NoYW5nZSAmJiB0aGlzLmhhc0luaXQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PgogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpLnNldENvbnRlbnQodmFsIHx8ICcnKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbW91bnRlZCgpIHsKICAgICAgICAgICAgdGhpcy5pbml0KCkKICAgICAgICB9LAogICAgICAgIGFjdGl2YXRlZCgpIHsKICAgICAgICAgICAgaWYgKHdpbmRvdy50aW55bWNlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmluaXRUaW55bWNlKCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZGVhY3RpdmF0ZWQoKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdHJveVRpbnltY2UoKQogICAgICAgIH0sCiAgICAgICAgZGVzdHJveWVkKCkgewogICAgICAgICAgICB0aGlzLmRlc3Ryb3lUaW55bWNlKCkKICAgICAgICB9LAogICAgICAgIG1ldGhvZHM6IHsKICAgICAgICAgICAgaW5pdCgpIHsKICAgICAgICAgICAgICAgIC8vIGR5bmFtaWMgbG9hZCB0aW55bWNlIGZyb20gY2RuCiAgICAgICAgICAgICAgICBsb2FkKHRpbnltY2VDRE4sIChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRUaW55bWNlKCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluaXRUaW55bWNlKCkgewogICAgICAgICAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICAgICAgICAgICAgICB3aW5kb3cudGlueW1jZS5pbml0KHsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogYCMke3RoaXMudGlueW1jZUlkfWAsCiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2VUeXBlTGlzdFsnemgnXSwKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIGJvZHlfY2xhc3M6ICdwYW5lbC1ib2R5ICcsCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0X3Jlc2l6aW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBwYXN0ZV9kYXRhX2ltYWdlczp0cnVlLAogICAgICAgICAgICAgICAgICAgIHRvb2xiYXI6IHRoaXMudG9vbGJhci5sZW5ndGggPiAwID8gdGhpcy50b29sYmFyIDogdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICBtZW51YmFyOiB0aGlzLm1lbnViYXIsCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luczogcGx1Z2lucywKICAgICAgICAgICAgICAgICAgICBlbmRfY29udGFpbmVyX29uX2VtcHR5X2Jsb2NrOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHBvd2VycGFzdGVfd29yZF9pbXBvcnQ6ICdjbGVhbicsCiAgICAgICAgICAgICAgICAgICAgY29kZV9kaWFsb2dfaGVpZ2h0OiA0NTAsCiAgICAgICAgICAgICAgICAgICAgY29kZV9kaWFsb2dfd2lkdGg6IDEwMDAsCiAgICAgICAgICAgICAgICAgICAgYnJhbmRpbmc6ZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgYXV0b21hdGljX3VwbG9hZHM6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgYWR2bGlzdF9idWxsZXRfc3R5bGVzOiAnc3F1YXJlJywKICAgICAgICAgICAgICAgICAgICBhZHZsaXN0X251bWJlcl9zdHlsZXM6ICdkZWZhdWx0JywKICAgICAgICAgICAgICAgICAgICBpbWFnZXRvb2xzX2NvcnNfaG9zdHM6IFsnd3d3LnRpbnltY2UuY29tJywgJ2NvZGVwZW4uaW8nXSwKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0X2xpbmtfdGFyZ2V0OiAnX2JsYW5rJywKICAgICAgICAgICAgICAgICAgICBsaW5rX3RpdGxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBub25icmVha2luZ19mb3JjZV90YWI6IHRydWUsIC8vIGluc2VydGluZyBub25icmVha2luZyBzcGFjZSAmbmJzcDsgbmVlZCBOb25icmVha2luZyBTcGFjZSBQbHVnaW4KICAgICAgICAgICAgICAgICAgICBpbml0X2luc3RhbmNlX2NhbGxiYWNrOiBlZGl0b3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDb250ZW50KF90aGlzLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmhhc0luaXQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5vbignTm9kZUNoYW5nZSBDaGFuZ2UgS2V5VXAgU2V0Q29udGVudCcsICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBlZGl0b3IuZ2V0Q29udGVudCgpKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2V0dXAoZWRpdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5vbignRnVsbHNjcmVlblN0YXRlQ2hhbmdlZCcsIChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mdWxsc2NyZWVuID0gZS5zdGF0ZQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgLy8gaXQgd2lsbCB0cnkgdG8ga2VlcCB0aGVzZSBVUkxzIGludGFjdAogICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LnRpbnkuY2xvdWQvZG9jcy0zeC9yZWZlcmVuY2UvY29uZmlndXJhdGlvbi9Db25maWd1cmF0aW9uM3hAY29udmVydF91cmxzLwogICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUxOTYyMDUvZGlzYWJsZS10aW55bWNlLWFic29sdXRlLXRvLXJlbGF0aXZlLXVybC1jb252ZXJzaW9ucwogICAgICAgICAgICAgICAgICAgIGNvbnZlcnRfdXJsczogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VzX3VwbG9hZF9oYW5kbGVyKGJsb2JJbmZvLCBzdWNjZXNzLCBmYWlsdXJlKXsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkSW1hZ2UoYmxvYkluZm8uYmxvYigpICwgc3VjY2VzcyAsIGZhaWx1cmUpCiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgLy/mi5bmlL7mlrnlvI8g5LiK5Lyg5Zu+54mHCiAgICAgICAgICAgICAgICAgICAgZmlsZV9waWNrZXJfY2FsbGJhY2s6IGZ1bmN0aW9uIChjYWxsYmFjaywgdmFsdWUsIG1ldGEpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICdmaWxlJyk7CgogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5vbmNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihmaWxlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGxvYWRJbWFnZShmaWxlICwgY2FsbGJhY2sgLCBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLypfdGhpcy5waWNrZXJVcGxvYWRJbWFnZShmaWxlLCBjYWxsYmFjayAsIGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSovCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwYXN0ZV91cGxvYWRfaW1hZ2U6ZnVuY3Rpb24gKGVkaXRvciAsIGZpbGUgLCBzdWNjZXNzICwgZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkSW1hZ2UoZmlsZSAsIHN1Y2Nlc3MgLCBlcnJvcikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAgICAgICBkZXN0cm95VGlueW1jZSgpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRpbnltY2UgPSB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpCiAgICAgICAgICAgICAgICBpZiAodGhpcy5mdWxsc2NyZWVuKSB7CiAgICAgICAgICAgICAgICAgICAgdGlueW1jZS5leGVjQ29tbWFuZCgnbWNlRnVsbFNjcmVlbicpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGlueW1jZSkgewogICAgICAgICAgICAgICAgICAgIHRpbnltY2UuZGVzdHJveSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldENvbnRlbnQodmFsdWUpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy50aW55bWNlLmdldCh0aGlzLnRpbnltY2VJZCkuc2V0Q29udGVudCh2YWx1ZSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0Q29udGVudCgpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy50aW55bWNlLmdldCh0aGlzLnRpbnltY2VJZCkuZ2V0Q29udGVudCgpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGltYWdlU3VjY2Vzc0NCSyhhcnIpIHsKICAgICAgICAgICAgICAgIGFyci5mb3JFYWNoKHYgPT4gd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKS5pbnNlcnRDb250ZW50KGA8aW1nIGNsYXNzPSJ3c2NucGgiIHNyYz0iJHt2LnVybH0iID5gKSkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Tinymce","sourcesContent":["<template>\n    <div :class=\"{fullscreen:fullscreen}\" class=\"tinymce-container\" :style=\"{width:containerWidth}\">\n        <textarea :id=\"tinymceId\" class=\"tinymce-textarea\"/>\n        <div class=\"editor-custom-btn-container\">\n            <editorImage color=\"#1890ff\" class=\"editor-upload-btn\" @successCBK=\"imageSuccessCBK\"/>\n        </div>\n    </div>\n</template>\n\n<script>\n    /**\n     * docs:\n     * https://panjiachen.github.io/vue-element-admin-site/feature/component/rich-editor.html#tinymce\n     */\n    import editorImage from './components/EditorImage'\n    import plugins from './plugins'\n    import toolbar from './toolbar'\n    import load from './dynamicLoadScript'\n\n    // why use this cdn, detail see https://github.com/PanJiaChen/tinymce-all-in-one\n    const tinymceCDN = '/static/tinymce/tinymce.min.js'\n\n    export default {\n        name: 'jt-tinymce',\n        components: {editorImage},\n        props: {\n            id: {\n                type: String,\n                default: function () {\n                    return 'vue-tinymce-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\n                }\n            },\n            value: {\n                type: String,\n                default: ''\n            },\n            toolbar: {\n                type: Array,\n                required: false,\n                default() {\n                    return []\n                }\n            },\n            menubar: {\n                type: String,\n                default: 'file edit insert view format table'\n            },\n            height: {\n                type: [Number, String],\n                required: false,\n                default: 360\n            },\n            width: {\n                type: [Number, String],\n                required: false,\n                default: 'auto'\n            },\n            uploadImage:{\n                type: Function,\n                required: true\n            },\n            pickerUploadImage:{\n                type: Function,\n                default:function () {\n                    return function (file,success,failure) {\n\n                    }\n                }\n            }\n        },\n        data() {\n            return {\n                hasChange: false,\n                hasInit: false,\n                tinymceId: this.id,\n                fullscreen: false,\n                languageTypeList: {\n                    'en': 'en',\n                    'zh': 'zh_CN',\n                    'es': 'es_MX',\n                    'ja': 'ja'\n                }\n            }\n        },\n        computed: {\n            containerWidth() {\n                const width = this.width\n                if (/^[\\d]+(\\.[\\d]+)?$/.test(width)) { // matches `100`, `'100'`\n                    return `${width}px`\n                }\n                return width\n            }\n        },\n        watch: {\n            value(val) {\n                if (!this.hasChange && this.hasInit) {\n                    this.$nextTick(() =>\n                        window.tinymce.get(this.tinymceId).setContent(val || ''))\n                }\n            }\n        },\n        mounted() {\n            this.init()\n        },\n        activated() {\n            if (window.tinymce) {\n                this.initTinymce()\n            }\n        },\n        deactivated() {\n            this.destroyTinymce()\n        },\n        destroyed() {\n            this.destroyTinymce()\n        },\n        methods: {\n            init() {\n                // dynamic load tinymce from cdn\n                load(tinymceCDN, (err) => {\n                    if (err) {\n                        this.$message.error(err.message)\n                        return\n                    }\n                    this.initTinymce()\n                })\n            },\n            initTinymce() {\n                const _this = this\n                window.tinymce.init({\n                    selector: `#${this.tinymceId}`,\n                    language: this.languageTypeList['zh'],\n                    height: this.height,\n                    body_class: 'panel-body ',\n                    object_resizing: false,\n                    paste_data_images:true,\n                    toolbar: this.toolbar.length > 0 ? this.toolbar : toolbar,\n                    menubar: this.menubar,\n                    plugins: plugins,\n                    end_container_on_empty_block: true,\n                    powerpaste_word_import: 'clean',\n                    code_dialog_height: 450,\n                    code_dialog_width: 1000,\n                    branding:false,\n                    automatic_uploads: true,\n                    advlist_bullet_styles: 'square',\n                    advlist_number_styles: 'default',\n                    imagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\n                    default_link_target: '_blank',\n                    link_title: false,\n                    nonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\n                    init_instance_callback: editor => {\n                        if (_this.value) {\n                            editor.setContent(_this.value)\n                        }\n                        _this.hasInit = true\n                        editor.on('NodeChange Change KeyUp SetContent', () => {\n                            this.hasChange = true\n                            this.$emit('input', editor.getContent())\n                        })\n                    },\n                    setup(editor) {\n                        editor.on('FullscreenStateChanged', (e) => {\n                            _this.fullscreen = e.state\n                        })\n                    },\n                    // it will try to keep these URLs intact\n                    // https://www.tiny.cloud/docs-3x/reference/configuration/Configuration3x@convert_urls/\n                    // https://stackoverflow.com/questions/5196205/disable-tinymce-absolute-to-relative-url-conversions\n                    convert_urls: false,\n                    images_upload_handler(blobInfo, success, failure){\n                        _this.uploadImage(blobInfo.blob() , success , failure)\n                    },\n\n                    //拖放方式 上传图片\n                    file_picker_callback: function (callback, value, meta) {\n\n                        var input = document.createElement('input');\n                        input.setAttribute('type', 'file');\n\n                        input.onchange = function () {\n\n                            var file = this.files[0];\n                            if(file){\n                                _this.uploadImage(file , callback , function () {\n\n                                })\n                            }\n\n                            /*_this.pickerUploadImage(file, callback , function () {\n\n                            })*/\n                        };\n                        input.click();\n                    },\n                    paste_upload_image:function (editor , file , success , error) {\n                        _this.uploadImage(file , success , error)\n                    }\n                })\n            },\n            destroyTinymce() {\n                const tinymce = window.tinymce.get(this.tinymceId)\n                if (this.fullscreen) {\n                    tinymce.execCommand('mceFullScreen')\n                }\n                if (tinymce) {\n                    tinymce.destroy()\n                }\n            },\n            setContent(value) {\n                window.tinymce.get(this.tinymceId).setContent(value)\n            },\n            getContent() {\n                window.tinymce.get(this.tinymceId).getContent()\n            },\n            imageSuccessCBK(arr) {\n                arr.forEach(v => window.tinymce.get(this.tinymceId).insertContent(`<img class=\"wscnph\" src=\"${v.url}\" >`))\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .tinymce-container {\n        position: relative;\n        line-height: normal;\n    }\n\n    .tinymce-container {\n        ::v-deep {\n            .mce-fullscreen {\n                z-index: 10000;\n            }\n        }\n    }\n\n    .tinymce-textarea {\n        visibility: hidden;\n        z-index: -1;\n    }\n\n    .editor-custom-btn-container {\n        position: absolute;\n        right: 4px;\n        top: 4px;\n        /*z-index: 2005;*/\n    }\n\n    .fullscreen .editor-custom-btn-container {\n        z-index: 10000;\n        position: fixed;\n    }\n\n    .editor-upload-btn {\n        display: inline-block;\n    }\n</style>\n"]}]}