{"remainingRequest":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\src\\views\\login\\index.vue?vue&type=style&index=0&id=37dfd6fc&lang=scss","dependencies":[{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\src\\views\\login\\index.vue","mtime":1619169822000},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\css-loader\\dist\\cjs.js","mtime":1755258878741},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1755258880305},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\postcss-loader\\src\\index.js","mtime":1755258879226},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755258878262},{"path":"D:\\实训2\\springboot和vue旅游系统蓝色3322\\bysj-client\\node_modules\\vue-loader\\lib\\index.js","mtime":1755258879809}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZ3JhbW9zLWxvZ2luew0KICAgIGhlaWdodDogMTAwJTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgIGZvbnQtZmFtaWx5OiAi5b6u6L2v6ZuF6buRIiwgIk1pY3Jvc29mdCBZYUhlaSIsIHNhbnMtc2VyaWYsIEFyaWFsLCAnVGltZXMgTmV3IFJvbWFuJywgLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCBzYW5zLXNlcmlmOw0KICAgIC5oLTEwMHZoew0KICAgICAgICBoZWlnaHQ6IDEwMHZoOw0KICAgIH0NCiAgICAuZC1mbGV4IHsNCiAgICAgICAgZGlzcGxheTogLW1zLWZsZXhib3ggIWltcG9ydGFudDsNCiAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50DQogICAgfQ0KICAgIC5mb3JtLWNvbnRyb2wtbGd7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgIH0NCiAgICAuYnRuLWJsb2Nrew0KICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgfQ0KICAgIGgzew0KICAgICAgICBmb250LXNpemU6IDI2cHg7DQogICAgfQ0KICAgIC5hbGlnbi1pdGVtcy1jZW50ZXIgew0KICAgICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7DQogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudA0KICAgIH0NCiAgICAucGFnZS1sb2FkZXIgew0KICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgIHJpZ2h0OiAwOw0KICAgICAgICBsZWZ0OiAwOw0KICAgICAgICB0b3A6IDA7DQogICAgICAgIGJvdHRvbTogMDsNCiAgICAgICAgei1pbmRleDogMTAwMTsNCiAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7DQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgIH0NCiAgICAuYWxpZ24taXRlbXMtbWQtY2VudGVyIHsNCiAgICAgICAgLW1zLWZsZXgtYWxpZ246IGNlbnRlciAhaW1wb3J0YW50Ow0KICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQNCiAgICB9DQogICAgLnBhZ2UtbG9hZGVyIC5zcGlubmVyLWJvcmRlciB7DQogICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7DQogICAgfQ0KICAgIC5tYi00LCAubXktNCB7DQogICAgICAgIG1hcmdpbi1ib3R0b206IDEuNXJlbSAhaW1wb3J0YW50DQogICAgfQ0KDQogICAgLnBhZ2UtbG9hZGVyIHNwYW4gew0KICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICBsZXR0ZXItc3BhY2luZzogMXB4Ow0KICAgICAgICBjb2xvcjogIzY0NjQ2NDsNCiAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgIH0NCg0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n    <div class=\"gramos-login\">\r\n        <div class=\"page-loader\" v-show=\"isLoaded\">\r\n            <div class=\"spinner-border\"></div>\r\n            <span>Loading ...</span>\r\n        </div>\r\n\r\n        <e-container class=\"h-100vh\">\r\n            <el-row type=\"flex\" align=\"center\" justify=\"center\" class=\"h-100vh\" style=\"align-items: center\">\r\n                <el-col :md=\"12\">\r\n                    <img class=\"img-fluid\" src=\"~@/assets/gramos/login.png\" alt=\"...\">\r\n                </el-col>\r\n                <el-col :md=\"8\" :offset=\"1\">\r\n                    <div class=\"d-flex align-items-center\" style=\"margin-bottom: 20px\">\r\n                        <img src=\"~@/assets/gramos/dark-logo.png\" class=\"m-r-15\" style=\"margin-right: 15px\" width=\"40\" alt=\"\">\r\n                        <h3 class=\"m-0\" style=\"margin: 0;\">{{ setting.title }}</h3>\r\n                    </div>\r\n                    <p>输入账号密码，登录系统.</p>\r\n                    <form action=\"javascript:;\" id=\"loginForm\" name=\"loginForm\" method=\"post\" @submit=\"login\">\r\n                        <div class=\"form-group mb-4\">\r\n                            <el-input type=\"text\" v-model=\"form.username\"\r\n                                      id=\"username\" autofocus placeholder=\"账号\"></el-input>\r\n                        </div>\r\n                        <div class=\"form-group mb-4\">\r\n                            <el-input type=\"password\" v-model=\"form.pwd\" id=\"password\" placeholder=\"密码\"></el-input>\r\n                        </div>\r\n                        <div class=\"form-group mb-4\">\r\n\r\n                            <el-input type=\"text\" v-model=\"form.pagerandom\" name=\"pagerandom\" class=\"form-control form-control-lg\" id=\"pagerandom\" placeholder=\"验证码\">\r\n                                <span class=\"input-group-append\" slot=\"append\">\r\n                                    <e-img :src=\"captchUrl\" style=\"min-width: 60px;min-height: 30px;\" onClick=\"this.src='captcha.do?time='+new Date().getTime();\" alt=\"点击刷新\"/>\r\n                                </span>\r\n                            </el-input>\r\n                        </div>\r\n                        <div class=\"form-group mb-4\">\r\n                            <el-select id=\"sys\" name=\"cx\" v-model=\"form.cx\" class=\"form-control-lg\">\r\n                                <el-option :value=\"r\" :label=\"r\" v-for=\"r in rules\" :key=\"r\"></el-option>\r\n                            </el-select>\r\n                        </div>\r\n\r\n                        <el-button type=\"primary\" native-type=\"submit\" class=\"btn btn-primary btn-lg btn-block btn-uppercase mb-4\">登录系统</el-button>\r\n\r\n                        <div class=\"text-center\">\r\n                            版权所有：{{ setting.title }}\r\n                        </div>\r\n                    </form>\r\n                </el-col>\r\n            </el-row>\r\n        </e-container>\r\n\r\n    </div>\r\n</template>\r\n<style type=\"type/scss\" lang=\"scss\">\r\n.gramos-login{\r\n    height: 100%;\r\n    width: 100%;\r\n    background: #ffffff;\r\n    font-family: \"微软雅黑\", \"Microsoft YaHei\", sans-serif, Arial, 'Times New Roman', -apple-system, BlinkMacSystemFont, sans-serif;\r\n    .h-100vh{\r\n        height: 100vh;\r\n    }\r\n    .d-flex {\r\n        display: -ms-flexbox !important;\r\n        display: flex !important\r\n    }\r\n    .form-control-lg{\r\n        width: 100%;\r\n    }\r\n    .btn-block{\r\n        display: block;\r\n        width: 100%;\r\n    }\r\n    h3{\r\n        font-size: 26px;\r\n    }\r\n    .align-items-center {\r\n        -ms-flex-align: center !important;\r\n        align-items: center !important\r\n    }\r\n    .page-loader {\r\n        position: fixed;\r\n        right: 0;\r\n        left: 0;\r\n        top: 0;\r\n        bottom: 0;\r\n        z-index: 1001;\r\n        background: white;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n    }\r\n    .align-items-md-center {\r\n        -ms-flex-align: center !important;\r\n        align-items: center !important\r\n    }\r\n    .page-loader .spinner-border {\r\n        margin-bottom: 15px;\r\n    }\r\n    .mb-4, .my-4 {\r\n        margin-bottom: 1.5rem !important\r\n    }\r\n\r\n    .page-loader span {\r\n        text-transform: uppercase;\r\n        letter-spacing: 1px;\r\n        color: #646464;\r\n        font-size: 12px;\r\n    }\r\n\r\n}\r\n</style>\r\n<script>\r\nimport setting from \"@/setting\";\r\nimport api from \"@/api\";\r\n\r\nexport default {\r\n    name: \"gramos-login\",\r\n    data() {\r\n        return {\r\n            isLoaded:true,\r\n            setting,\r\n            captchUrl: '',\r\n            loading: false,\r\n            form: {\r\n                username: '',\r\n                pwd: '',\r\n                cx: '管理员',\r\n\r\n                /* 验证码段 */\r\n                pagerandom:'',\r\n                a:'a'\r\n                /* 验证码段 */\r\n\r\n            },\r\n            rules: [\r\n                                    '管理员',\r\n                                    '用户',\r\n                            ]\r\n        }\r\n    },\r\n    watch: {},\r\n    computed: {},\r\n    methods: {\r\n        login() {\r\n\r\n            this.loading = true;\r\n            this.$store.dispatch('user/login', this.form).then(res => {\r\n\r\n                this.loading = false;\r\n                if (res.code == api.code.OK) {\r\n                    this.$message.success('登录成功');\r\n                    var redirect = this.$route.query.redirect;\r\n                    if (redirect) {\r\n                        this.$router.replace(redirect);\r\n                    } else {\r\n                        this.$router.replace('/admin/sy');\r\n                    }\r\n                } else {\r\n                    this.$message.error(res.msg);\r\n                }\r\n                if(res.code == 20){\r\n                    this.loadCaptch();\r\n                }\r\n            }).catch(err => {\r\n                this.loading = false;\r\n                this.$message.error(err.message)\r\n            });\r\n        },\r\n        loadCaptch()\r\n        {\r\n            api.captch().then(res=>{\r\n                console.log(res);\r\n                this.form.captchToken = res.token;\r\n                this.captchUrl = res.url;\r\n            });\r\n        }\r\n    },\r\n    created() {\r\n        this.form.cx = this.rules[0];\r\n        this.loadCaptch();\r\n\r\n    },\r\n    mounted() {\r\n        setTimeout(()=>{\r\n            this.isLoaded = false;\r\n        },500);\r\n    },\r\n    destroyed() {\r\n    }\r\n}\r\n</script>"]}]}